{% extends 'base.html' %}
{% load humanize %}
{% load static %}

{% block title %}Dashboard{% endblock title %}

{% block javascript %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock javascript %}

{% block stylesheet %}
<meta name="robots" content="noindex">
{% endblock stylesheet%}

{% block content %}
<div id="dashboard" class="">
  <div class="text-2xl font-semibold">Users ({{ user_count }})</div>
  <div class="">
    <div class="signupcount-linechart-container" style="height: 180px;">
      <signupcount-linechart :name='signupCountName' :labels='signupDateLabels' :series='signupCountSeries'>
      </signupcount-linechart>
    </div>
  </div>

  <div class="flex flex-col items-center justify-center text-center w-1/2 mt-4 ">
    <div>
      Screenshot not saved: {{ count_screenshot_not_saved }}
    </div>
    <div>
      Bio not saved: {{ count_maker_bio_not_saved }}
    </div>

    <button @click="saveInfoForAll"
      class="capitalize bg-red-600 hover:bg-red-500 text-white px-4 py-2 mt-2 rounded-lg tracking-wide">
      Save screenshots/bios for all
    </button>

    <a href="{% url 'generate-json' %}"
      class="capitalize bg-green-600 hover:bg-green-500 text-white px-4 py-2 mt-2 rounded-lg tracking-wide">
      Generate json
    </a>

    <div class="mt-6">
      <div class="text-lg font-semibold">
        Users without bio ({{users_without_bio|length}})
      </div>
      {% if users_without_bio %}
      {% for user in users_without_bio %}
      {{user.maker_fullname}}
      <button class="">Fetch bio (fake)</button>
      {% endfor %}
      {% endif %}
    </div>

  </div>

</div>


{% endblock content %}